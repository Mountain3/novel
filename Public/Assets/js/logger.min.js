
if(typeof(window.logger)=="undefined")
{window.logger={};}
logger.trim=function(s){return(s!=null?s.toString().replace(/(^\s*)|(\s*$)/g,""):"");};logger.touch=function(uri){if(document.images)
{(new Image).src="http://log.zongheng.com"+uri;};return true;};logger.visit=function(){if(window.user==null||window.user==undefined)
{return false;}
var hadVisit=jQuery.cookie("visit_list");var userId=user.userId;var doVisit=true;if(hadVisit==null)
{hadVisit=userId;}
else
{var ids=hadVisit.split(",");for(var id=0;id<ids.length;id++)
{if(ids[id]==userId)
{doVisit=false;break;}}
if(doVisit)
{hadVisit=hadVisit+","+userId;}}
if(doVisit)
{var dnow=new Date();var dtommorow=new Date(dnow.getFullYear(),dnow.getMonth(),dnow.getDate()+1);jQuery.cookie("visit_list",hadVisit,{path:"/",domain:".zongheng.com",expires:dtommorow});jQuery.ajax({url:"http://www.zongheng.com/ajax/user.v1s1t.do",dataType:"jsonp",success:function(data){if(data.ret===true)
{}}});}};logger.log=function(url,params){if(url!=null)
{var timeout=0;var k=url.indexOf(":");if(k>-1)
{timeout=parseInt(url.substring(0,k));url=url.substring(k+1);}
for(var i in params)
{url=url.replace("!{"+i+"}",params[i]);}
if(timeout>0)
{setTimeout(function(){logger.touch(url);},timeout);}
else
{logger.touch(url);}}};jQuery(function(){var uri=document.body.getAttribute("logger");if(uri!=null)
{var params={"userId":"0"};if(window.user!=null&&window.user!=undefined)
{params.userId=window.user.userId;}
logger.log(uri,params);}});jQuery(function(){logger.visit();setTimeout(function(){var tg_user=jQuery.cookie("tg_user");if(tg_user==null)
{var refer_user=jQuery.url.param("refer");if(refer_user==null)
{return;};if(isNaN(refer_user))
{return;};var v_user_id=visitUserId();var tg_value=refer_user+"|"+v_user_id;jQuery.cookie("tg_user",tg_value,{domain:".zongheng.com",path:"/",expires:100});}},2000);});var SC_LOCK=false;(function(){function visitUserId()
{var rand=0;var v_user=jQuery.cookie("v_user");if(v_user==null)
{rand=Math.round(Math.random()*100000000);v_user=document.referrer+"|"+document.location+"|"+rand;jQuery.cookie("v_user",v_user,{domain:".zongheng.com",path:"/",expires:100});}
else
{rand=v_user.slice(v_user.lastIndexOf("|")+1);};return rand;};function scUserId()
{var rand=0;var sc_user=jQuery.cookie("sc_user");if(sc_user==null)
{rand=Math.round(Math.random()*100000000);var sc_user_id=document.referrer+"|"+document.location+"|"+rand;jQuery.cookie("sc_user",sc_user_id,{domain:".zongheng.com",path:"/",expires:15});}
else
{rand=sc_user.slice(sc_user.lastIndexOf("|")+1);}
return rand;}
setTimeout(function(){var sc_user=jQuery.cookie("sc_user");var v_user_id=visitUserId();var cookieCO=jQuery.cookie("CO");if(!cookieCO)cookieCO="N";if(sc_user==null)
{logger.touch("/scvisit/SC_VISIT/"+encodeURIComponent(document.referrer)+"/"+encodeURIComponent(document.location)+"/"+v_user_id+"/"+cookieCO);}
else
{var scUserCookie=sc_user.split("|");if(scUserCookie.length==3)
{logger.touch("/scvisit/SC_USER/"+encodeURIComponent(scUserCookie[0])+"/"+encodeURIComponent(scUserCookie[1])+"/"+encodeURIComponent(scUserCookie[2])+"/SC_VISIT/"+encodeURIComponent(document.referrer)+"/"+encodeURIComponent(document.location)+"/"+v_user_id+"/"+cookieCO);}
else
{jQuery.cookie("sc_user",null);logger.touch("/scvisit/SC_VISIT/"+encodeURIComponent(document.referrer)+"/"+encodeURIComponent(document.location)+"/"+v_user_id+"/"+cookieCO);};};},40);jQuery(function(){var urlCO=jQuery.url.param("CO");if(urlCO||SC_LOCK===true)
{if(!urlCO)urlCO="N";jQuery("a,area").mousedown(function()
{var clickUrl=jQuery(this).attr("href");if(clickUrl!=null)
{if(clickUrl.length>5)
{var regionCode="0/00/0";if(jQuery(this).attr("regionCode")!=null)
{regionCode=jQuery(this).attr("regionCode");}
logger.touch("/scclick/"+encodeURIComponent(document.referrer)+"/"+encodeURIComponent(document.location)+"/"+encodeURIComponent(clickUrl)+"/"+scUserId()+"/"+regionCode+"/"+urlCO);}}});if(urlCO!="N")
{jQuery.cookie("CO",urlCO,{domain:".zongheng.com",path:"/",expires:100});}
setTimeout(function(){logger.touch("/scdisplay/"+encodeURIComponent(document.referrer)+"/"+encodeURIComponent(document.location)+"/"+scUserId()+"/"+urlCO);},3000);}});})();