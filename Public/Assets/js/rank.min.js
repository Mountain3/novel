
var BookmarkSupport={};BookmarkSupport.bind=function(parent){parent.find(".jrsj_plus").hover(function(){var source=jQuery(this);source.removeClass("li_sec");source.addClass("add");source.html("");return false;},function(){var source=jQuery(this);source.removeClass("add");source.addClass("li_sec");if(source.attr("order")!=null)
{source.html(source.attr("order"));try
{if(document.selection)
{document.selection.empty();}
else
{var selection=document.getSelection();selection.removeAllRanges();}}
catch(e)
{}}
return false;});parent.find(".jrsj, .jrsj_plus").attr("title","加入书架");parent.find(".jrsj_plus").parent().hover(function(){jQuery(this).find(".jrsj_plus").mouseover();},function(){jQuery(this).find(".jrsj_plus").mouseout();});parent.find(".jrsj, .jrsj_plus").click(function(){var bookId=jQuery(this).attr("bookId");if(bookId==null&&jQuery.trim(bookId)=="")
{MessageDialog.open("系统错误, 请稍候重试 !");return false;}
if(window.user==null||window.user==undefined)
{var source=jQuery(this);UserManager.login(function(){source.click();});return false;}
jQuery.ajax({type:"get",url:"http://www.zongheng.com/ajax/bookshelf.do",data:{"bookId":bookId},dataType:"jsonp",async:true,error:function()
{MessageDialog.open("系统错误, 请稍候再试 !");},success:function(data)
{if(data)
{if(data.mes)
{MessageDialog.open(data.mes);}}}});});};jQuery(function(){jQuery(".userDonate").click(function(){if(window.user==null||window.user==undefined)
{var source=jQuery(this);UserManager.login(function(){source.click()});return false;}
var label=["1","3"];FrameDialog.open("/dialog/bookSupportDialog.html?ver="+dialogVer,{"bookId":jQuery(this).attr("bookId"),"bookName":jQuery(this).attr("bookName"),"label":label.join("|"),"active":3});return false;});});jQuery(function(){if(jQuery("#monthTicketRankList").size()<1)
{return false;}
var rankType=jQuery("#monthTicketRankList").attr("rankType");if(rankType==null)
{rankType="1";}
jQuery.ajax({type:"get",url:Domain.bookHostName+"/ajax/rank.getZongHengRankList.do?rankType="+rankType+"&pageNum=1&pageSize=10",dataType:"jsonp",async:true,error:function(){},success:function(data){if(data==null||data.length==null)
{return;}
var buffer=[];for(var i=0,length=data.length;i<length;i++)
{var e=data[i];if(i<length-1)
{buffer[buffer.length]="<li><span>"+e.number+"</span>";}
else
{buffer[buffer.length]="<li class=\"last\"><span>"+e.number+"</span>";}
if(i<3)
{buffer[buffer.length]="<em class=\"list_icon top jrsj_plus\" bookId=\""+e.bookId+"\" order=\""+(i+1)+"\" title=\"加入书架\">"+(i+1)+"</em>";}
else
{buffer[buffer.length]="<em class=\"list_icon jrsj_plus\" bookId=\""+e.bookId+"\" order=\""+(i+1)+"\" title=\"加入书架\">"+(i+1)+"</em>";}
buffer[buffer.length]="<!-- a href=\""+Domain.bookHostName+"/category/"+e.bookCatePid+".html\" class=\"book_style\">"+e.bookShortCateName+"</a --><a href=\""+Domain.bookHostName+"/book/"+e.bookId+".html\" title=\""+StringUtil.html(e.bookName)+"\" target=\"_blank\">"+StringUtil.substring(e.bookName,20,"...")+"</a></li>";}
jQuery("#monthTicketRankList").html(buffer.join(""));BookmarkSupport.bind(jQuery("#monthTicketRankList"));}});});