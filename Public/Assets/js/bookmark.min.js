
var SimpleTabView={};SimpleTabView.active=function(src){if(src!=null)
{var tabId=src.getAttribute("tabId");var list=jQuery(src).parent().find(".tabtitle");list.each(function(){if(this.getAttribute("tabId")!=null)
{if(src==this)
{jQuery(this).addClass("current");}
else
{jQuery(this).removeClass("current");}}});if(tabId!=null)
{list=jQuery(src).closest(".tabcontainer").find(".tabpanel");list.each(function(){if(this.getAttribute("tabId")!=null)
{if(this.getAttribute("tabId")==tabId)
{this.style.display="block";}
else
{this.style.display="none";}}});}}};var BookmarkSupport={};BookmarkSupport.bind=function(parent){parent.find(".jrsj_plus").hover(function(){var source=jQuery(this);source.removeClass("li_sec");source.addClass("add");source.html("");return false;},function(){var source=jQuery(this);source.removeClass("add");source.addClass("li_sec");if(source.attr("order")!=null)
{source.html(source.attr("order"));try
{if(document.selection)
{document.selection.empty();}
else
{var selection=document.getSelection();selection.removeAllRanges();}}
catch(e)
{}}
return false;});parent.find(".jrsj, .jrsj_plus").attr("title","加入书架");parent.find(".jrsj_plus").parent().hover(function(){jQuery(this).find(".jrsj_plus").mouseover();},function(){jQuery(this).find(".jrsj_plus").mouseout();});parent.find(".jrsj, .jrsj_plus").click(function(){var bookId=jQuery(this).attr("bookId");if(bookId==null&&jQuery.trim(bookId)=="")
{MessageDialog.open("系统错误, 请稍候重试 !");return false;}
if(window.user==null||window.user==undefined)
{var source=jQuery(this);UserManager.login(function(){source.click();});return false;}
jQuery.ajax({type:"get",url:"http://www.zongheng.com/ajax/bookshelf.do",data:{"bookId":bookId},dataType:"jsonp",async:true,error:function()
{MessageDialog.open("系统错误, 请稍候再试 !");},success:function(data)
{if(data)
{if(data.mes)
{MessageDialog.open(data.mes);}}}});});};jQuery(function(){BookmarkSupport.bind(jQuery("body"));jQuery(".tabtitle").each(function(){var source=jQuery(this);var event=(source.attr("event")!=null?source.attr("event"):"mouseover");source.bind(event,function(){SimpleTabView.active(this);return false;});});jQuery(".tab_block").hover(function(){jQuery(this).find(".jrsj").show();},function(){jQuery(this).find(".jrsj").hide();});jQuery(".ui-book-panel").hover(function(){jQuery(this).find(".detail-panel").show();},function(){jQuery(this).find(".detail-panel").hide();});});